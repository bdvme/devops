*Студент: Дмитрий Багрянский*

# Домашняя работа

## Урок 5.1 Введение в виртуализацию. Типы и функции гипервизоров. Обзор рынка вендоров и областей применения.

## Задача 1
Опишите кратко, как вы поняли: в чем основное отличие полной (аппаратной) виртуализации, паравиртуализации и виртуализации на основе ОС.

###### Ответ:

* Полная (аппаратная) виртуализация - гипервизоры работают на аппаратном уровне без необходимости установки ОС на хост. Ядро ОС никак не модифицируется, гостевая ОС считает, что работает напрямую с аппаратным уровнем. Пример: vSphere, ESXi, Xen Server, Hyper-V, CITRIX.

* Паравиртуализация - гипервизорам необходима ОС для доступа к аппаратным ресурсам хоста. Взаимодействие с аппаратным уровнем происходит через компоненты ОС. Ядро ОС модифицируется для работы виртуальных машин, гостевая ОС понимает, что она является виртуальной машиной. Пример: Parallels, VirtualBox, KVM, Proxmox.

* Виртуализация на основе ОС - метод виртуализации, при котором ядро операционной системы поддерживает несколько изолированных экземпляров (контейнеры) пространства пользователя, вместо одного. Эти контейнеры или зоны с точки зрения пользователя полностью идентичны реальному серверу. Для систем на базе UNIX, эта технология может рассматриваться как улучшенная реализация механизма chroot. Ядро обеспечивает полную изолированность контейнеров, поэтому программы из разных контейнеров не могут воздействовать друг на друга. Основное отличие виртуализации на уровне ОС в том, что виртуализируется не компьютер и не операционная система, а пользовательское окружение ОС. Примеры: LXC, OpenVZ, docker.

## Задача 2
Выберите один из вариантов использования организации физических серверов, в зависимости от условий использования.

Организация серверов:
- физические сервера,
- паравиртуализация,
- виртуализация уровня ОС.

Условия использования:
- Высоконагруженная база данных, чувствительная к отказу.
- Различные web-приложения.
- Windows системы для использования бухгалтерским отделом.
- Системы, выполняющие высокопроизводительные расчеты на GPU.

Опишите, почему вы выбрали к каждому целевому использованию такую организацию.

###### Ответ:

* Физические сервера:

  * Высоконагруженная база данных, чувствительная к отказу. Требуется высокая производительность и отсутствие промежуточных компонентов, которые снижают производительность, а так же прямое взаимодействие гипервизора с железом.

  * Системы, выполняющие высокопроизводительные расчеты на GPU. Не все системы виртуализации могут поддерживать проприетарные драйвера GPU, что негативно скажется на производительности GPU.

* Паравиртуализация:

  * Windows системы для использования бухгалтерским отделом. Подойдет любой гипервизор второго типа. Будет обеспечена высокая производительность, бэкап ВМ, контроль ее состояния и быстрое востановление.

* Виртуализация уровня ОС:

  * Различные Web-приложения. Многокомпонентные web-приложения можно быстро разворачивать в виде контейнеров, оперативно работать с отдельными контейнерами.

## Задача 3
Выберите подходящую систему управления виртуализацией для предложенного сценария. Детально опишите ваш выбор.

Сценарии:

1. 100 виртуальных машин на базе Linux и Windows, общие задачи, нет особых требований. Преимущественно Windows based инфраструктура, требуется реализация программных балансировщиков нагрузки, репликации данных и автоматизированного механизма создания резервных копий.
2. Требуется наиболее производительное бесплатное open source решение для виртуализации небольшой (20-30 серверов) инфраструктуры на базе Linux и Windows виртуальных машин.
3. Необходимо бесплатное, максимально совместимое и производительное решение для виртуализации Windows инфраструктуры.
4. Необходимо рабочее окружение для тестирования программного продукта на нескольких дистрибутивах Linux.

###### Ответ:

* 100 виртуальных машин на базе Linux и Windows, общие задачи, нет особых требований. Преимущественно Windows based инфраструктура, требуется реализация программных балансировщиков нагрузки, репликации данных и автоматизированного механизма создания резервных копий.

  * Для данного сценария подойдет гипервизор первого типа, например: VMWare ESXi. Полная аппаратная виртуализация позволит достичь высокой производительности любой поддерживаемой гостевой ОС. Механизмы VMware DRS, vSphere Replication, vSphere vMotion и vCenter Server Appliance - позволят балансировать нагрузку, выполнять репликацию и миграцию работающих ВМ, а также выполнять автоматическое резервное копирование.

* Требуется наиболее производительное бесплатное open source решение для виртуализации небольшой (20-30 серверов) инфраструктуры на базе Linux и Windows виртуальных машин.

  * Для данного сценария подойдет гипервизор второго типа, например OpenSource решение KVM отлично работает с Linux, а так же позволяет запускать Windows с хорошей производительностью.

* Необходимо бесплатное, максимально совместимое и производительное решение для виртуализации Windows инфраструктуры.

  * Для данного сценария подойдет Microsoft Hyper-V, этот гипервизор максимально совместим с Windows инфраструктурой, обеспечивает максимальную производительность. Hyper-V входит в состав Windows Server.

* Необходимо рабочее окружение для тестирования программного продукта на нескольких дистрибутивах Linux.

  * Для данного сценария отлично подойдет связка Vagrant+VirtualBox. Vagrant обеспечивает быстрое развертывание тестовых сред, возможность тонкой настройки каждой ВМ и одновременную работу разных дистрибутивов семейства Linux.

## Задача 4
Опишите возможные проблемы и недостатки гетерогенной среды виртуализации (использования нескольких систем управления виртуализацией одновременно) и что необходимо сделать для минимизации этих рисков и проблем. Если бы у вас был выбор, то создавали бы вы гетерогенную среду или нет? Мотивируйте ваш ответ примерами.

###### Ответ:

* Возможные проблемы и недостатки гетерогенной среды виртуализации

  * Гетерогенные виртуальные среды также могут быть неэффективны и сложны в управлении. Многие компании решили реализовывать пошаговую стратегию виртуализации ИТ-инфраструктуры, постепенно внедряя решения от различных производителей. Такой подход подразумевает, что определенные типы устройств выполняют соответственные задачи, и при этом компания зависит от продукции не одного вендора. Учитывая тот факт, что для управления таким «лоскутным одеялом» требуется целый набор специалистов различного профиля, данный способ виртуализации инфраструктуры является дорогостоящим и неэффективным в долгосрочной перспективе, поскольку, по мере развития технологий, компании стремятся обеспечить легкость в управлении, совместимость различных систем и масштабируемость инфраструктуры.

* Что необходимо сделать для минимизации этих рисков и проблем

  * необходимо использовать комплексные решения, которые смогут функционировать как в физической, так и в виртуальной среде

  * нужно максимально снизить вероятность несовместимости технологий и упростить управление инфраструктурой для обеспечения совместимости и масштабируемости ИТ-инфраструктуры в рамках всей виртуальной среды

  * так же необходима универсальная платформа, которая упростит перемещение данных между гипервизорами и обеспечит их надежную защиту, автоматически создавая виртуальные машины в качестве резервной копии физических серверов, чтобы не перемещать виртуальные машины полностью.

* Если бы у вас был выбор, то создавали бы вы гетерогенную среду или нет?

  * Нет, за исключением случаев острой необходимости одновременного использования серверов на Windows и Linux. При этом данная среда не планирует сильно изменяться в будущем.
