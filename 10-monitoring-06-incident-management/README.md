*Студент: Дмитрий Багрянский*

# Домашняя работа

## Урок 10.06 Инцидент-менеджмент.

## Задание

Составьте постмортем, на основе реального сбоя системы Github в 2018 году.

Информация о сбое доступна [в виде краткой выжимки на русском языке](https://habr.com/ru/post/427301/) , а
также [развёрнуто на английском языке](https://github.blog/2018-10-30-oct21-post-incident-analysis/).

---
###### Ответы:

## Постмортем:

* **Краткое описание инцидента**
    * _Суточная деградация сервиса_


* **Предшествующие события**
    * _**22:52 UTC 21-10-18:** Замена оптического оборудования_


* **Причина инцидента**
    * _Каскадный сбой, рассогласованность кластеров СУБД_


* **Воздействие**
    * _Большинство внутренних систем_


* **Обнаружение**
    * _**22:54 UTC 21-10-18:** С помощью внутренней системы мониторинга_


* **Реакция**
    * _**23:09 UTC 21-10-18:** Группа реагирования присвоила желтый статус инциденту_
    * _**23:11 UTC 21-10-18:** Координатор присоединился к работе и через две минуты принял решение изменить статус на красный_


* **Восстановление**
    * _Восстановление баз данных из резервных копий_
    * _Синхронизация баз данных между всеми локациями_
    * _Возврат к стабильной топологии обслуживания_
    * _Возобновление обработки заданий в очереди_


* **Таймлайн**
    * _**22:52 UTC 21-10-18:** Замена оптического оборудования._
    * _**22:54 UTC 21-10-18:** Многочисленные сбои в системах. Отсутствие репликации на сервера восточного побережья._
    * _**23:07 UTC 21-10-18:** Персонал вручную блокирует внутренние инструменты развертывания для предотвращения дополнительных изменений. Сайт переведен в желтый статус, подключен координатор инцидентов. Через 2 минуты переведён в красный статус._
    * _**23:13 UTC 21-10-18:** Проблемой затронуто несколько кластеров БД, привлечены инженеры из группы разработки БД. Была выполнена переадресация записи на сервера западного побережья._
    * _**23:19 UTC 21-10-18:** Принято решение о временном отключении части систем для ускорения восстановления баз данных._
    * _**00:05 UTC 22-10-18:** Инженеры из группы реагирования начали разрабатывать план устранения несогласованности данных и запустили процедуры отработки отказа для MySQL._
    * _**00:41 UTC 22-10-18:** Запуск восстановления из резервной копии всех баз данных._
    * _**06:51 UTC 22-10-18:** Закончено восстановление данных из бэкапов на некоторых серверах, запущен процесс репликации между западным и восточным побережьем._
    * _**07:46 UTC 22-10-18:** Публикация дополнительной информации для пользователей._
    * _**11:12 UTC 22-10-18:** Восстановлены сервера на западном побережье, продолжается реплицирование. Наблюдается повышенная нагрузка при репликации._
    * _**13:15 UTC 22-10-18:** Из-за пиковой нагрузки по трафику на GitHub.com были введены в строй дополнительные реплики чтения MySQL на восточном побережье._
    * _**16:24 UTC 22-10-18:** Завершение репликации, выполнено аварийное переключение на исходную топологию, что решило проблемы с задержкой/доступностью. Приступили к обработке накопившихся данных._
    * _**16:45 UTC 22-10-18:** Восстановление данных, оставшихся в очереди._
    * _**23:03 UTC 22-10-18:** Подтверждена целостность и правильная работа всех систем. Статус сайта был обновлен до зеленого._


* **Последующие действия**
    * _По всем серверам производится анализ логов для выявления запросов, требующих ручной обработки._
    * _Коммуникация с пользователями._
    * _Убедиться, что все несоответствия данных решены._
    * _Разработать систему оповещений с более детальным описанием (красный, жёлтый, зелёный - неинформативно)._
    * _Изменение работы систем и ЦОД с целью сохранения работоспособности при полной потере одного из ЦОД._
