*Студент: Дмитрий Багрянский*

# Домашняя работа

## Урок 11.02 «Микросервисы: принципы»

Вы работаете в крупной компании, которая строит систему на основе микросервисной архитектуры.
Вам как DevOps-специалисту необходимо выдвинуть предложение по организации инфраструктуры для разработки и эксплуатации.

## Задача 1: API Gateway

Предложите решение для обеспечения реализации API Gateway. Составьте сравнительную таблицу возможностей различных программных решений. На основе таблицы сделайте выбор решения.

Решение должно соответствовать следующим требованиям:
- маршрутизация запросов к нужному сервису на основе конфигурации,
- возможность проверки аутентификационной информации в запросах,
- обеспечение терминации HTTPS.

Обоснуйте свой выбор.

---
###### Ответ:

| Решение              | Маршрутизация | Аутентификация | Терминация HTTPS | Бесплатно/Открыто                                                |
|----------------------|---------------|----------------|------------------|------------------------------------------------------------------|
| Yandex API Gateway   | +             | +              | +                | Платно                                                           |
| SberCloud API Gateway| +             | +              | +                | Платно                                                           |
| Azure API Gateway    | +             | +              | +                | Платно                                                           |
| AWS API Gateway      | +             | +              | +                | Платно                                                           |
| Oracle API Gateway   | +             | +              | +                | Платно                                                           |
| Google API Gateway   | +             | +              | +                | До 2 миллионов запросов в месяц — бесплатно                      |
| HAProxy              | +             | +              | +                | Бесплатно                                                        |
| NGINX                | +             | +              | +                | Бесплатно                                                        |
| Kong Gateway         | +             | +              | +                | Бесплатно                                                        |

По функциональности все варианты подходят. Для небольших проектов можно использовать облачный API, например, от Яндекс или Сбер. 
Для того, чтобы развернуть на своем оборудовании API Gateway, существует множество вариантов. 
Хорошим вариантом будет NGINX, популярный бесплатный продукт с огромным сообществом разработчиков (в интернете можно найти достаточное количество примеров реализации API Gateway). Так же можно использовать Kong Gateway, как очень популярное решение. 


## Задача 2: Брокер сообщений

Составьте таблицу возможностей различных брокеров сообщений. На основе таблицы сделайте обоснованный выбор решения.

Решение должно соответствовать следующим требованиям:

- поддержка кластеризации для обеспечения надёжности,
- хранение сообщений на диске в процессе доставки,
- высокая скорость работы,
- поддержка различных форматов сообщений,
- разделение прав доступа к различным потокам сообщений,
- простота эксплуатации.

Обоснуйте свой выбор.

---
###### Ответ:

| Характеристика \ Брокер                               | Kafka | Redis | RabbitMQ | ActiveMQ | AWS SQS/SNS |
|-------------------------------------------------------|-------|-------|----------|----------|-------------|
| Поддержка кластеризации для обеспечения надежности    | +     | +     | +        | +        | +           |
| Хранение сообщений на диске в процессе доставки       | +     | +     | +        | +        | +           |
| Высокая скорость работы                               | +     | +     | +        | -        | +           |
| Поддержка различных форматов сообщений                | +     | +     | +        | +        | +           |
| Разделение прав доступа к различным потокам сообщений | +     | +     | +        | +        | +           |
| Простота эксплуатации                                 | -     | +     | +        | +        | +           |

Kafka или RabbitMQ будут лучшими вариантами. если ожидается сильная нагрузка на брокеров сообщений, то kafka - оптимальный выбор. При этом RabbitMQ позволяет строить сложные сценарии маршрутизации.

Kafka — это распределенная очередь с высокой пропускной способностью, созданная для длительного хранения больших объемов данных. Она идеально подходит в тех случаях, где требуется персистентность.

AWS SQS/SNS - минимальные накладные расходы и быстрая настройка, подойдет для стартапов.
